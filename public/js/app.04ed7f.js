(()=>{"use strict";(()=>{class e{regexp;constructor(e){this.regexp=e}test(e){return e instanceof URL&&(e=e.toString()),e.match(this.regexp)?"pass":"fail"}}class t{static all(e,...t){return!(t.length<=0)&&t.map((t=>t.test(e))).filter((e=>"pass"==e)).length==t.length}static one(e,...t){return!(t.length<=0)&&t.map((t=>t.test(e))).filter((e=>"pass"==e)).length>=1}}const a={google:new e(/\.google(?:\.com?|\.\w{2})(?:\.\w{2})?/),bing:new e(/((?:bing|bing\.office|microsoftapp)\.net)|((?:bing(?:apis)?|windowssearch|bingforbusiness)\.com)|((?:cortana)\.ai)/),yahoo:new e(/yahoo(?:\.com?(?:\.\w{2})?|\.\w{2})/),ecosia:new e(/ecosia\.\w{2,3}/),duckduckgo:new e(/duckduckgo\.\w{2,3}/),qwant:new e(/qwant\.com/),twitter:new e(/(?:tw(?:ttr|img|itter))(?:\.com|\.net)|x\.com/),facebook:new e(/(?:the)?face(?:b|c)oo?o?k?\.(?:com?|\w{2})(?:\.\w{2})?|(?:fb(?:cdn)?\.(?:com|me|net))|(?:ins?tr?a?gram\.com?)|^m\.me|messenger\.com|akamaihd\.net/),tiktok:new e(/tiktok(?:v|cdn)?\.com/),instagram:new e(/instagram(?:m|n)?\.com/),linkedin:new e(/linkedin\.com/),pinterest:new e(/pinterest\.com/),youtube:new e(/youtube\.\w{2}|youtube(?:go|gaming|kids)\.(?:com|\w{2})?(?:\.\w{2})?|(?:yt|youtu)\.be/)};class r{type;medium;request;referer;constructor(e="utm",t,a=null,r=null){this.type=e,this.medium=t,this.request=a,this.referer=r}}class o extends r{constructor(e,t=null,a=null){super("utm",e,t,a)}}class s extends r{constructor(e,t=null,a=null){super("referer",e,t,a)}}class n{static test(e,t=null){const a=this.getUrchinTrackingModule(e);return a.medium?this.parseUtm(a):this.parseReferer(e,t)}static parseUtm(e){let t="referral";switch(e.medium?.toLowerCase()){case"cpc":case"display":case"email":case"pmax":case"leadgen":case"search":t="cpc";break;case"google":case"bing":case"yahoo":case"ecosia":case"duckduckgo":case"qwant":t="organic";break;case"twitter":case"x":case"facebook":case"fb":case"tiktok":case"instagram":case"ig":case"linkedin":case"pinterest":case"youtube":t="social";break;case"newsletter":t="email"}return new o(t,e.url)}static parseReferer(e,r=null){return e=new URL(e),r=r?new URL(r):null,r?.pathname.match(/^(?:\/wp)?\/wp-(?:admin|login)/)&&(r=null),null==r?new s("direct",e):t.one(r.toString(),a.google,a.bing,a.yahoo,a.ecosia,a.duckduckgo,a.qwant)?new s("organic",e,r):t.one(r.toString(),a.twitter,a.facebook,a.tiktok,a.instagram,a.linkedin,a.pinterest,a.youtube)?new s("social",e,r):new s("referral",e,r)}static getUrchinTrackingModule(e){if(!((e=new URL(e))instanceof URL))throw new Error("Refer not an URL!");return{url:e,id:e.searchParams.get("utm_id"),source:e.searchParams.get("utm_source"),medium:e.searchParams.get("utm_medium"),name:e.searchParams.get("utm_campaign"),term:e.searchParams.get("utm_term"),content:e.searchParams.get("utm_content")}}}new class{attrElems;data;constructor(){this.attrElems=document.querySelectorAll("[class*=oto-attr]"),this.attrElems.length<=0?console.warn("No Attributor fields found!"):"localStorage"in window?(this.readFromStorage(),this.populateAttrs()):console.warn("Local storage not accessible!")}readFromStorage(){console.log("readFromStorage");let e=localStorage.getItem("oto/attributor");null==e&&(console.log("undefined, set store"),e=this.#e(),localStorage.setItem("oto/attributor",e));const t=JSON.parse(e);0==this.#t(t)&&(console.log("expired, set store"),e=this.#e(),localStorage.setItem("oto/attributor",e)),this.data=t.payload}#t(e){if(!("expires"in e)||!("payload"in e))return!1;return!(new Date>=new Date(e.expires))}#e(){console.log("createAttributorStoreJSON");const e=n.test(window.location.href,document.referrer),t=new Date;t.setTime(t.getTime()+144e5);return JSON.stringify({payload:e,expires:t})}populateAttrs(){console.log("populateAttrs"),this.attrElems.forEach((e=>{const t=e.querySelector("input"),a=e.classList.toString().match(/(?<className>oto-attr__(?<prop>[^\s]+))/);if(null==a||null==t)return;const r=a?.groups.prop;r in this.data&&(t.value=this.data[r])}))}}})()})();
//# sourceMappingURL=app.04ed7f.js.map